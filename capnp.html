<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API Reference &#8212; capnp 2.2.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=279e0f84" />
    <script src="_static/documentation_options.js?v=219dea72"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quickstart"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">capnp 2.2.2 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API Reference</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-capnp">
<span id="api-reference"></span><span id="api"></span><h1>API Reference<a class="headerlink" href="#module-capnp" title="Link to this heading">¶</a></h1>
<p>A python library wrapping the Cap’n Proto C++ library</p>
<p>Example Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">capnp</span>

<span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>

<span class="c1"># Building</span>
<span class="n">addresses</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">AddressBook</span><span class="o">.</span><span class="n">newMessage</span><span class="p">()</span>
<span class="n">people</span> <span class="o">=</span> <span class="n">addresses</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s1">&#39;people&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">alice</span> <span class="o">=</span> <span class="n">people</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">alice</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">123</span>
<span class="n">alice</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Alice&#39;</span>
<span class="n">alice</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="s1">&#39;alice@example.com&#39;</span>
<span class="n">alicePhone</span> <span class="o">=</span> <span class="n">alice</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s1">&#39;phones&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">alicePhone</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;mobile&#39;</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">addresses</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Reading</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.bin&#39;</span><span class="p">)</span>

<span class="n">addresses</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">AddressBook</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">for</span> <span class="n">person</span> <span class="ow">in</span> <span class="n">addresses</span><span class="o">.</span><span class="n">people</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">person</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">phones</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">phone</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
</pre></div>
</div>
<section id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Link to this heading">¶</a></h2>
<section id="rpc">
<h3>RPC<a class="headerlink" href="#rpc" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="capnp.lib.capnp._RemotePromise">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.lib.capnp.</span></span><span class="sig-name descname"><span class="pre">_RemotePromise</span></span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._RemotePromise.cancel">
<span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.cancel" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.lib.capnp._RemotePromise.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.schema" title="Link to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this reader</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._RemotePromise.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ordered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encode_bytes_as_base64</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.to_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<section id="communication">
<h4>Communication<a class="headerlink" href="#communication" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="capnp.TwoPartyClient">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">TwoPartyClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">socket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient" title="Link to this definition">¶</a></dt>
<dd><p>TwoPartyClient for RPC Communication</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>socket</strong> – AsyncIoStream</p></li>
<li><p><strong>traversal_limit_in_words</strong> – Pointer derefence limit (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
<li><p><strong>nesting_limit</strong> – Recursive limit when reading types (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="capnp.TwoPartyClient.bootstrap">
<span class="sig-name descname"><span class="pre">bootstrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient.bootstrap" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.TwoPartyClient.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient.close" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.TwoPartyClient.on_disconnect">
<span class="sig-name descname"><span class="pre">on_disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient.on_disconnect" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp.TwoPartyServer">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">TwoPartyServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">socket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bootstrap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer" title="Link to this definition">¶</a></dt>
<dd><p>TwoPartyServer for RPC Communication</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>socket</strong> – AsyncIoStream</p></li>
<li><p><strong>bootstrap</strong> – Class object defining the implementation of the Cap’n’proto interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> – Pointer derefence limit (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
<li><p><strong>nesting_limit</strong> – Recursive limit when reading types (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="capnp.TwoPartyServer.bootstrap">
<span class="sig-name descname"><span class="pre">bootstrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.bootstrap" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.TwoPartyServer.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.close" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.TwoPartyServer.on_disconnect">
<span class="sig-name descname"><span class="pre">on_disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.on_disconnect" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.AsyncIoStream">
<span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">AsyncIoStream</span></span><a class="headerlink" href="#capnp.AsyncIoStream" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#capnp.lib.capnp._AsyncIoStream" title="capnp.lib.capnp._AsyncIoStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">_AsyncIoStream</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp.lib.capnp._AsyncIoStream">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.lib.capnp.</span></span><span class="sig-name descname"><span class="pre">_AsyncIoStream</span></span><a class="headerlink" href="#capnp.lib.capnp._AsyncIoStream" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._AsyncIoStream.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._AsyncIoStream.close" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._AsyncIoStream.create_connection">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span><span class="k"><span class="pre">static</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">create_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._AsyncIoStream.create_connection" title="Link to this definition">¶</a></dt>
<dd><p>Create a TCP connection.</p>
<p>All parameters given to this function are passed to <cite>asyncio.get_running_loop().create_connection()</cite>.
See that function for documentation on the possible arguments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._AsyncIoStream.create_server">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span><span class="k"><span class="pre">static</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">create_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._AsyncIoStream.create_server" title="Link to this definition">¶</a></dt>
<dd><p>Create a TCP connection server.</p>
<p>The <cite>callback</cite> parameter will be called whenever a new connection is made. It receives a <cite>AsyncIoStream</cite>
instance as its only argument. If the result of <cite>callback</cite> is a coroutine, it will be scheduled as a task.</p>
<p>This function behaves similarly to <cite>asyncio.get_running_loop().create_server()</cite>. All arguments except
for <cite>callback</cite> will be passed directly to that function, and the server returned is similar as well.
See that function for documentation on the possible arguments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._AsyncIoStream.create_unix_connection">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span><span class="k"><span class="pre">static</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">create_unix_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._AsyncIoStream.create_unix_connection" title="Link to this definition">¶</a></dt>
<dd><p>Create a Unix socket connection.</p>
<p>All parameters given to this function are passed to <cite>asyncio.get_running_loop().create_unix_connection()</cite>.
See that function for documentation on the possible arguments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._AsyncIoStream.create_unix_server">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span><span class="k"><span class="pre">static</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">create_unix_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._AsyncIoStream.create_unix_server" title="Link to this definition">¶</a></dt>
<dd><p>Create a unix connection server.</p>
<p>The <cite>callback</cite> parameter will be called whenever a new connection is made. It receives a <cite>AsyncIoStream</cite>
instance as its only argument. If the result of <cite>callback</cite> is a coroutine, it will be scheduled as a task.</p>
<p>This function behaves similarly to <cite>asyncio.get_running_loop().create_server()</cite>. All arguments except
for <cite>callback</cite> will be passed directly to that function, and the server returned is similar as well.
See that function for documentation on the possible arguments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._AsyncIoStream.wait_closed">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">wait_closed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._AsyncIoStream.wait_closed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="capability">
<h4>Capability<a class="headerlink" href="#capability" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="capnp.lib.capnp._DynamicCapabilityClient">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.lib.capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicCapabilityClient</span></span><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._DynamicCapabilityClient.cast_as">
<span class="sig-name descname"><span class="pre">cast_as</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient.cast_as" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.lib.capnp._DynamicCapabilityClient.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient.schema" title="Link to this definition">¶</a></dt>
<dd><p>A property that returns the _InterfaceSchema object matching this client</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._DynamicCapabilityClient.upcast">
<span class="sig-name descname"><span class="pre">upcast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient.upcast" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="response">
<h4>Response<a class="headerlink" href="#response" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.lib.capnp.</span></span><span class="sig-name descname"><span class="pre">_Response</span></span><a class="headerlink" href="#capnp.lib.capnp._Response" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response.as_builder">
<span class="sig-name descname"><span class="pre">as_builder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_first_segment_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allocate_seg_callable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Response.as_builder" title="Link to this definition">¶</a></dt>
<dd><p>A method for casting this Reader to a Builder</p>
<p>This is a copying operation with respect to the message’s buffer.
Changes in the new builder will not reflect in the original reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Size of the first segment to allocate (in words ie. 8 byte increments)</p></li>
<li><p><strong>allocate_seg_callable</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.14)"><em>bytearray</em></a><em>]</em>) – A python callable object that takes the minimum number of 8-byte</p></li>
</ul>
</dd>
</dl>
<p>words to allocate (as an <cite>int</cite>) and returns a <cite>bytearray</cite>. This is used to customize the memory 
allocation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp.lib.capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response.get_data_as_view">
<span class="sig-name descname"><span class="pre">get_data_as_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Response.get_data_as_view" title="Link to this definition">¶</a></dt>
<dd><p>Efficiently get a read-only memoryview for a DATA field without copying.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response.is_root">
<span class="sig-name descname"><span class="pre">is_root</span></span><a class="headerlink" href="#capnp.lib.capnp._Response.is_root" title="Link to this definition">¶</a></dt>
<dd><p>is_root: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#capnp.lib.capnp._Response.schema" title="Link to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this reader</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ordered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encode_bytes_as_base64</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Response.to_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response.total_size">
<span class="sig-name descname"><span class="pre">total_size</span></span><a class="headerlink" href="#capnp.lib.capnp._Response.total_size" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.lib.capnp._Response.which">
<span class="sig-name descname"><span class="pre">which</span></span><a class="headerlink" href="#capnp.lib.capnp._Response.which" title="Link to this definition">¶</a></dt>
<dd><p>Returns the enum corresponding to the union in this struct</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicEnumField</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string/enum corresponding to what field is set in the union</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.lib.capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this struct doesn’t contain a union</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="miscellaneous">
<h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="capnp.KjException">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">KjException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">durability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrapper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.KjException" title="Link to this definition">¶</a></dt>
<dd><p>KjException is a wrapper of the internal C++ exception type.</p>
<p>There is an enum named <cite>Type</cite> listed below, and a bunch of fields.</p>
<dl class="py class">
<dt class="sig sig-object py" id="capnp.KjException.Type">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">Type</span></span><a class="headerlink" href="#capnp.KjException.Type" title="Link to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="capnp.KjException.Type.DISCONNECTED">
<span class="sig-name descname"><span class="pre">DISCONNECTED</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DISCONNECTED'</span></span><a class="headerlink" href="#capnp.KjException.Type.DISCONNECTED" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.KjException.Type.FAILED">
<span class="sig-name descname"><span class="pre">FAILED</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'FAILED'</span></span><a class="headerlink" href="#capnp.KjException.Type.FAILED" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.KjException.Type.OTHER">
<span class="sig-name descname"><span class="pre">OTHER</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OTHER'</span></span><a class="headerlink" href="#capnp.KjException.Type.OTHER" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.KjException.Type.OVERLOADED">
<span class="sig-name descname"><span class="pre">OVERLOADED</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OVERLOADED'</span></span><a class="headerlink" href="#capnp.KjException.Type.OVERLOADED" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.KjException.Type.UNIMPLEMENTED">
<span class="sig-name descname"><span class="pre">UNIMPLEMENTED</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'UNIMPLEMENTED'</span></span><a class="headerlink" href="#capnp.KjException.Type.UNIMPLEMENTED" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.KjException.Type.reverse_mapping">
<span class="sig-name descname"><span class="pre">reverse_mapping</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'DISCONNECTED':</span> <span class="pre">'DISCONNECTED',</span> <span class="pre">'FAILED':</span> <span class="pre">'FAILED',</span> <span class="pre">'OTHER':</span> <span class="pre">'OTHER',</span> <span class="pre">'OVERLOADED':</span> <span class="pre">'OVERLOADED',</span> <span class="pre">'UNIMPLEMENTED':</span> <span class="pre">'UNIMPLEMENTED'}</span></span><a class="headerlink" href="#capnp.KjException.Type.reverse_mapping" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.KjException.add_note">
<span class="sig-name descname"><span class="pre">add_note</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">note</span></span></em>, <em class="sig-param"><span class="positional-only-separator o"><abbr title="Positional-only parameter separator (PEP 570)"><span class="pre">/</span></abbr></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.KjException.add_note" title="Link to this definition">¶</a></dt>
<dd><p>Add a note to the exception</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.KjException.args">
<span class="sig-name descname"><span class="pre">args</span></span><a class="headerlink" href="#capnp.KjException.args" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="capnp.KjException.description">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#capnp.KjException.description" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="capnp.KjException.file">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">file</span></span><a class="headerlink" href="#capnp.KjException.file" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="capnp.KjException.line">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">line</span></span><a class="headerlink" href="#capnp.KjException.line" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="capnp.KjException.type">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#capnp.KjException.type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.KjException.with_traceback">
<span class="sig-name descname"><span class="pre">with_traceback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tb</span></span></em>, <em class="sig-param"><span class="positional-only-separator o"><abbr title="Positional-only parameter separator (PEP 570)"><span class="pre">/</span></abbr></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.KjException.with_traceback" title="Link to this definition">¶</a></dt>
<dd><p>Set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp.SchemaParser">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">SchemaParser</span></span><a class="headerlink" href="#capnp.SchemaParser" title="Link to this definition">¶</a></dt>
<dd><p>A class for loading Cap’n Proto schema files.</p>
<p>Do not use this class unless you’re sure you know what you’re doing.
Use the convenience method <a class="reference internal" href="#capnp.load" title="capnp.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a> instead.</p>
<dl class="py method">
<dt class="sig sig-object py" id="capnp.SchemaParser.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imports</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.SchemaParser.load" title="Link to this definition">¶</a></dt>
<dd><p>Load a Cap’n Proto schema from a file</p>
<p>You will have to load a schema before you can begin doing anything
meaningful with this library. Loading a schema is much like loading
a Python module (and load even returns a <cite>ModuleType</cite>). Once it’s been
loaded, you use it much like any other Module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">SchemaParser</span><span class="p">()</span>
<span class="n">addressbook</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">qux</span> <span class="c1"># qux is a top level constant</span>
<span class="c1"># 123</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – A relative or absolute path to a Cap’n Proto schema</p></li>
<li><p><strong>display_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – The name internally used by the Cap’n Proto library
for the loaded schema. By default, it’s just os.path.basename(file_name)</p></li>
<li><p><strong>imports</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><em>list</em></a>) – A list of str directories to add to the import path.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>ModuleType</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A module corresponding to the loaded schema. You can access
parsed schemas and constants with . syntax</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">exceptions.IOError</span></code> if <cite>file_name</cite> doesn’t exist</p></li>
<li><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if the Cap’n Proto C++ library has any problems loading the schema</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp.SchemaParser.modules_by_id">
<span class="sig-name descname"><span class="pre">modules_by_id</span></span><a class="headerlink" href="#capnp.SchemaParser.modules_by_id" title="Link to this definition">¶</a></dt>
<dd><p>modules_by_id: dict</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp.SchemaLoader">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">SchemaLoader</span></span><a class="headerlink" href="#capnp.SchemaLoader" title="Link to this definition">¶</a></dt>
<dd><p>Class which can be used to construct Schema objects from schema::Nodes as defined in
schema.capnp.</p>
<p>This class wraps capnproto/c++/src/capnp/schema-loader.h directly.</p>
<dl class="py method">
<dt class="sig sig-object py" id="capnp.SchemaLoader.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.SchemaLoader.get" title="Link to this definition">¶</a></dt>
<dd><p>Gets the schema for the given ID, throwing an exception if it isn’t present.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.SchemaLoader.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_NodeReader</span> <span class="pre">reader</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.SchemaLoader.load" title="Link to this definition">¶</a></dt>
<dd><p>Loads the given schema node.  Validates the node and throws an exception if invalid.  This
makes a copy of the schema, so the object passed in can be destroyed after this returns.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp.SchemaLoader.load_dynamic">
<span class="sig-name descname"><span class="pre">load_dynamic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_DynamicStructReader</span> <span class="pre">reader</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.SchemaLoader.load_dynamic" title="Link to this definition">¶</a></dt>
<dd><p>Loads the given schema node with self.load, but converts from a _DynamicStructReader
first.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="capnp.add_import_hook">
<span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">add_import_hook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.add_import_hook" title="Link to this definition">¶</a></dt>
<dd><p>Add a hook to the python import system, so that Cap’n Proto modules are directly importable</p>
<p>After calling this function, you can use the python import syntax to directly import capnproto schemas.
This function is automatically called upon first import of <cite>capnp</cite>,
so you will typically never need to use this function.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">capnp</span>
<span class="n">capnp</span><span class="o">.</span><span class="n">add_import_hook</span><span class="p">()</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">addressbook_capnp</span>
<span class="c1"># equivalent to capnp.load(&#39;addressbook.capnp&#39;, &#39;addressbook&#39;, sys.path),</span>
<span class="c1"># except it will search for &#39;addressbook.capnp&#39; in all directories of sys.path</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="capnp.remove_import_hook">
<span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">remove_import_hook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.remove_import_hook" title="Link to this definition">¶</a></dt>
<dd><p>Remove the import hook, and return python’s import to normal</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="capnp.cleanup_global_schema_parser">
<span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">cleanup_global_schema_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.cleanup_global_schema_parser" title="Link to this definition">¶</a></dt>
<dd><p>Unloads all of the schema from the current context</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="capnp.kj_loop">
<span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">kj_loop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.kj_loop" title="Link to this definition">¶</a></dt>
<dd><p>Context manager for running the KJ event loop</p>
<p>As long as the context manager is active it is guaranteed that the KJ event
loop is running. When the context manager is exited, the KJ event loop is
shut down properly and pending tasks are cancelled.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[</strong><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.14)"><strong>RuntimeError</strong></a><strong>]</strong> – If the KJ event loop is already running (on this thread).</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Every capnp rpc call required a running KJ event loop.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="capnp.run">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coro</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.run" title="Link to this definition">¶</a></dt>
<dd><p>Ensure that the coroutine runs while the KJ event loop is running</p>
<p>This is a shortcut for wrapping the coroutine in a <a class="reference internal" href="#capnp.kj_loop" title="capnp.kj_loop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">capnp.kj_loop()</span></code></a> context manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>coro</strong> – Coroutine to run</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="capnp.load">
<span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imports</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.load" title="Link to this definition">¶</a></dt>
<dd><p>Load a Cap’n Proto schema from a file</p>
<p>You will have to load a schema before you can begin doing anything
meaningful with this library. Loading a schema is much like loading
a Python module (and load even returns a <cite>ModuleType</cite>). Once it’s been
loaded, you use it much like any other Module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">qux</span> <span class="c1"># qux is a top level constant in the addressbook.capnp schema</span>
<span class="c1"># 123</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – A relative or absolute path to a Cap’n Proto schema</p></li>
<li><p><strong>display_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – The name internally used by the Cap’n Proto library
for the loaded schema. By default, it’s just os.path.basename(file_name)</p></li>
<li><p><strong>imports</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><em>list</em></a>) – A list of str directories to add to the import path.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>ModuleType</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A module corresponding to the loaded schema. You can access
parsed schemas and constants with . syntax</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if <cite>file_name</cite> doesn’t exist</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="internal-classes">
<h2>Internal Classes<a class="headerlink" href="#internal-classes" title="Link to this heading">¶</a></h2>
<p>These classes are internal to the library. You will never need to allocate
one yourself, but you may end up using some of their member methods.</p>
<section id="modules">
<h3>Modules<a class="headerlink" href="#modules" title="Link to this heading">¶</a></h3>
<p>These are classes that are made for you when you import a Cap’n Proto file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">capnp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">addressbook_capnp</span>

<span class="nb">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">addressbook_capnp</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span> <span class="c1"># capnp.capnp._StructModule</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="capnp._InterfaceModule">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_InterfaceModule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._InterfaceModule" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._StructModule">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_StructModule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.from_bytes">
<span class="sig-name descname"><span class="pre">from_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.from_bytes" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Reader for the unpacked object in buf.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
<li><p><strong>builder</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a>) – If true, return a builder object.</p></li>
</ul>
</dd>
</dl>
<p>Enabling <cite>builder</cite> will allow you to change the contents of <cite>buf</cite>, so do this with care.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a> or <a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.from_bytes_packed">
<span class="sig-name descname"><span class="pre">from_bytes_packed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.from_bytes_packed" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Reader for the packed object in buf.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the readable buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.from_segments">
<span class="sig-name descname"><span class="pre">from_segments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.from_segments" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Reader for a list of segment bytes.</p>
<p>This avoids making copies.</p>
<p>NB: This is not currently supported on PyPy.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.new_message">
<span class="sig-name descname"><span class="pre">new_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_first_segment_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allocate_seg_callable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.new_message" title="Link to this definition">¶</a></dt>
<dd><p>Returns a newly allocated builder message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Size of the first segment to allocate (in words ie. 8 byte increments)</p></li>
<li><p><strong>allocate_seg_callable</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.14)"><em>bytearray</em></a><em>]</em>) – A python callable object that takes the minimum number of 8-byte</p></li>
</ul>
</dd>
</dl>
<p>words to allocate (as an <cite>int</cite>) and returns a <cite>bytearray</cite>. This is used to customize the memory
allocation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><em>dict</em></a>) – A list of fields and their values to initialize in the struct.</p>
</dd>
</dl>
<p>Note, kwargs is not an actual argument, but refers to Python’s ability to pass keyword arguments.
ie. new_message(my_field=100)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Reader for the unpacked object read from file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<a class="reference internal" href="#capnp.KjException.file" title="capnp.KjException.file"><em>file</em></a>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.read_async">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">read_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_AsyncIoStream</span> <span class="pre">stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_async" title="Link to this definition">¶</a></dt>
<dd><p>Async version of read(). Returns either a message, or None in case of EOF.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<a class="reference internal" href="#capnp.AsyncIoStream" title="capnp.AsyncIoStream"><em>AsyncIoStream</em></a>) – A AsyncIoStream</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.read_multiple">
<span class="sig-name descname"><span class="pre">read_multiple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple" title="Link to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<a class="reference internal" href="#capnp.KjException.file" title="capnp.KjException.file"><em>file</em></a>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
<li><p><strong>skip_copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a>) – By default, each message is copied because the file needs to advance, even if the message is
never read completely. Skip this only if you know what you’re doing.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.read_multiple_bytes">
<span class="sig-name descname"><span class="pre">read_multiple_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple_bytes" title="Link to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.read_multiple_bytes_packed">
<span class="sig-name descname"><span class="pre">read_multiple_bytes_packed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple_bytes_packed" title="Link to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.read_multiple_packed">
<span class="sig-name descname"><span class="pre">read_multiple_packed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple_packed" title="Link to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<a class="reference internal" href="#capnp.KjException.file" title="capnp.KjException.file"><em>file</em></a>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
<li><p><strong>skip_copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a>) – By default, each message is copied because the file needs to advance, even if the message is
never read completely. Skip this only if you know what you’re doing.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StructModule.read_packed">
<span class="sig-name descname"><span class="pre">read_packed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_packed" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Reader for the packed object read from file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<a class="reference internal" href="#capnp.KjException.file" title="capnp.KjException.file"><em>file</em></a>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed.
Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="readers">
<h3>Readers<a class="headerlink" href="#readers" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="capnp._DynamicListReader">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicListReader</span></span><a class="headerlink" href="#capnp._DynamicListReader" title="Link to this definition">¶</a></dt>
<dd><p>Class for reading Cap’n Proto Lists</p>
<p>This class thinly wraps the C++ Cap’n Proto DynamicList::Reader class. __getitem__ and __len__
have been defined properly, so you can treat this class mostly like any other iterable class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="n">phones</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="n">phones</span> <span class="c1"># This returns a _DynamicListReader</span>

<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span>

<span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">phones</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._DynamicStructReader">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicStructReader</span></span><a class="headerlink" href="#capnp._DynamicStructReader" title="Link to this definition">¶</a></dt>
<dd><p>Reads Cap’n Proto structs</p>
<p>This class is almost a 1 for 1 wrapping of the Cap’n Proto C++ DynamicStruct::Reader.
The only difference is that instead of a <cite>get</cite> method, __getattr__ is overloaded and the field name
is passed onto the C++ equivalent <cite>get</cite>. This means you just use . syntax to access any field.
For field names that don’t follow valid python naming convention for fields, use the global function
<a class="reference external" href="https://docs.python.org/3/library/functions.html#getattr" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="c1"># This returns a _DynamicStructReader</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="c1"># using . syntax</span>
<span class="nb">print</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="s1">&#39;field-with-hyphens&#39;</span><span class="p">)</span> <span class="c1"># for names that are invalid for python, use getattr</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructReader.as_builder">
<span class="sig-name descname"><span class="pre">as_builder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_first_segment_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allocate_seg_callable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructReader.as_builder" title="Link to this definition">¶</a></dt>
<dd><p>A method for casting this Reader to a Builder</p>
<p>This is a copying operation with respect to the message’s buffer.
Changes in the new builder will not reflect in the original reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Size of the first segment to allocate (in words ie. 8 byte increments)</p></li>
<li><p><strong>allocate_seg_callable</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.14)"><em>bytearray</em></a><em>]</em>) – A python callable object that takes the minimum number of 8-byte</p></li>
</ul>
</dd>
</dl>
<p>words to allocate (as an <cite>int</cite>) and returns a <cite>bytearray</cite>. This is used to customize the memory 
allocation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructReader.get_data_as_view">
<span class="sig-name descname"><span class="pre">get_data_as_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructReader.get_data_as_view" title="Link to this definition">¶</a></dt>
<dd><p>Efficiently get a read-only memoryview for a DATA field without copying.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructReader.is_root">
<span class="sig-name descname"><span class="pre">is_root</span></span><a class="headerlink" href="#capnp._DynamicStructReader.is_root" title="Link to this definition">¶</a></dt>
<dd><p>is_root: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructReader.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#capnp._DynamicStructReader.schema" title="Link to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this reader</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructReader.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ordered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encode_bytes_as_base64</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructReader.to_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructReader.total_size">
<span class="sig-name descname"><span class="pre">total_size</span></span><a class="headerlink" href="#capnp._DynamicStructReader.total_size" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructReader.which">
<span class="sig-name descname"><span class="pre">which</span></span><a class="headerlink" href="#capnp._DynamicStructReader.which" title="Link to this definition">¶</a></dt>
<dd><p>Returns the enum corresponding to the union in this struct</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicEnumField</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string/enum corresponding to what field is set in the union</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this struct doesn’t contain a union</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._PackedFdMessageReader">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_PackedFdMessageReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._PackedFdMessageReader" title="Link to this definition">¶</a></dt>
<dd><p>Read a Cap’n Proto message from a file descriptor in a packed manner</p>
<p>You use this class to for reading message(s) from a file. It’s analagous to the inverse of
<code class="xref py py-func docutils literal notranslate"><span class="pre">_write_packed_message_to_fd()</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">_MessageBuilder</span></code>, but in one class.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out.txt&#39;</span><span class="p">)</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">_PackedFdMessageReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>fd (<cite>int</cite>) - A file descriptor</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="capnp._PackedFdMessageReader.get_root">
<span class="sig-name descname"><span class="pre">get_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._PackedFdMessageReader.get_root" title="Link to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs</p>
<p>You will need to pass in a schema to specify which struct to
instantiate. Schemas are available in a loaded Cap’n Proto module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An object with all the data of the read Cap’n Proto message.
Access members with . syntax.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._PackedFdMessageReader.get_root_as_any">
<span class="sig-name descname"><span class="pre">get_root_as_any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._PackedFdMessageReader.get_root_as_any" title="Link to this definition">¶</a></dt>
<dd><p>A method for getting a Cap’n Proto AnyPointer, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicObjectReader</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An AnyPointer that you can read from</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._StreamFdMessageReader">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_StreamFdMessageReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traversal_limit_in_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nesting_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StreamFdMessageReader" title="Link to this definition">¶</a></dt>
<dd><p>Read a Cap’n Proto message from a file descriptor</p>
<p>You use this class to for reading message(s) from a file. It’s analagous to the inverse of
<code class="xref py py-func docutils literal notranslate"><span class="pre">_write_message_to_fd()</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">_MessageBuilder</span></code>, but in one class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out.txt&#39;</span><span class="p">)</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">_StreamFdMessageReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>fd (<cite>int</cite>) - A file descriptor</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="capnp._StreamFdMessageReader.get_root">
<span class="sig-name descname"><span class="pre">get_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StreamFdMessageReader.get_root" title="Link to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs</p>
<p>You will need to pass in a schema to specify which struct to
instantiate. Schemas are available in a loaded Cap’n Proto module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An object with all the data of the read Cap’n Proto message.
Access members with . syntax.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._StreamFdMessageReader.get_root_as_any">
<span class="sig-name descname"><span class="pre">get_root_as_any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StreamFdMessageReader.get_root_as_any" title="Link to this definition">¶</a></dt>
<dd><p>A method for getting a Cap’n Proto AnyPointer, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicObjectReader</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An AnyPointer that you can read from</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="builders">
<h3>Builders<a class="headerlink" href="#builders" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="capnp._DynamicResizableListBuilder">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicResizableListBuilder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicResizableListBuilder" title="Link to this definition">¶</a></dt>
<dd><p>Class for building growable Cap’n Proto Lists</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You need to call <a class="reference internal" href="#capnp._DynamicResizableListBuilder.finish" title="capnp._DynamicResizableListBuilder.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finish()</span></code></a> on this object before serializing the
Cap’n Proto message. Failure to do so will cause your objects not to be
written out as well as leaking orphan structs into your message.</p>
</div>
<p>This class works much like <a class="reference internal" href="#capnp._DynamicListBuilder" title="capnp._DynamicListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicListBuilder</span></code></a>, but it allows growing the list dynamically.
It is meant for lists of structs, since for primitive types like int or float, you’re much better off
using a normal python list and then serializing straight to a Cap’n Proto list.
It has __getitem__ and __len__ defined, but not __setitem__:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>

<span class="n">phones</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="n">init_resizable_list</span><span class="p">(</span><span class="s1">&#39;phones&#39;</span><span class="p">)</span> <span class="c1"># This returns a _DynamicResizableListBuilder</span>

<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="n">phones</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">person</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicResizableListBuilder.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicResizableListBuilder.add" title="Link to this definition">¶</a></dt>
<dd><p>A method for adding a new struct to the list</p>
<p>This will return a struct, in which you can set fields that will be reflected in the serialized
Cap’n Proto message.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicResizableListBuilder.finish">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicResizableListBuilder.finish" title="Link to this definition">¶</a></dt>
<dd><p>A method for closing this list and serializing all its members to the message</p>
<p>If you don’t call this method, the items you previously added from this object will leak into the message,
ie. inaccessible but still taking up space.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._DynamicListBuilder">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicListBuilder</span></span><a class="headerlink" href="#capnp._DynamicListBuilder" title="Link to this definition">¶</a></dt>
<dd><p>Class for building Cap’n Proto Lists</p>
<p>This class thinly wraps the C++ Cap’n Proto DynamicList::Bulder class. __getitem__, __setitem__, and __len__
have been defined properly, so you can treat this class mostly like any other iterable class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>

<span class="n">phones</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s1">&#39;phones&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># This returns a _DynamicListBuilder</span>

<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">phones</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicListBuilder.adopt">
<span class="sig-name descname"><span class="pre">adopt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_DynamicOrphan</span> <span class="pre">orphan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicListBuilder.adopt" title="Link to this definition">¶</a></dt>
<dd><p>A method for adopting Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing.
Orphans are useful for dynamically allocating objects for an unknown sized list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – The index of the element in the list to replace with the newly adopted object</p></li>
<li><p><strong>orphan</strong> (<a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a>) – A Cap’n proto orphan to adopt. It will be unusable after this operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicListBuilder.disown">
<span class="sig-name descname"><span class="pre">disown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicListBuilder.disown" title="Link to this definition">¶</a></dt>
<dd><p>A method for disowning Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – The index of the element in the list to disown</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicListBuilder.init">
<span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicListBuilder.init" title="Link to this definition">¶</a></dt>
<dd><p>A method for initializing an element in a list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – The index of the element in the list</p></li>
<li><p><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Size of the element to be initialized.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicStructBuilder</span></span><a class="headerlink" href="#capnp._DynamicStructBuilder" title="Link to this definition">¶</a></dt>
<dd><p>Builds Cap’n Proto structs</p>
<p>This class is almost a 1 for 1 wrapping of the Cap’n Proto C++ DynamicStruct::Builder.
The only difference is that instead of a <cite>get</cite>/<cite>set</cite> method, __getattr__/__setattr__ is overloaded
and the field name is passed onto the C++ equivalent function.</p>
<p>This means you just use . syntax to access or set any field. For field names that don’t follow valid
python naming convention for fields, use the global functions <a class="reference external" href="https://docs.python.org/3/library/functions.html#getattr" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a>/<a class="reference external" href="https://docs.python.org/3/library/functions.html#setattr" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">setattr()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span> <span class="c1"># This returns a _DynamicStructBuilder</span>

<span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span> <span class="c1"># using . syntax</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="c1"># using . syntax</span>

<span class="nb">setattr</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="s1">&#39;field-with-hyphens&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="c1"># for names that are invalid for python, use setattr</span>
<span class="nb">print</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="s1">&#39;field-with-hyphens&#39;</span><span class="p">)</span> <span class="c1"># for names that are invalid for python, use getattr</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.adopt">
<span class="sig-name descname"><span class="pre">adopt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_DynamicOrphan</span> <span class="pre">orphan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.adopt" title="Link to this definition">¶</a></dt>
<dd><p>A method for adopting Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing.
Orphans are useful for dynamically allocating objects for an unknown sized list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – The field name in the struct</p></li>
<li><p><strong>orphan</strong> (<a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a>) – A Cap’n proto orphan to adopt. It will be unusable after this operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.as_reader">
<span class="sig-name descname"><span class="pre">as_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.as_reader" title="Link to this definition">¶</a></dt>
<dd><p>A method for casting this Builder to a Reader</p>
<p>This is a non-copying operation with respect to the message’s buffer.
This means changes to the fields in the original struct will carry over to the new reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.clear_write_flag">
<span class="sig-name descname"><span class="pre">clear_write_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.clear_write_flag" title="Link to this definition">¶</a></dt>
<dd><p>A method used to clear the _is_written flag.</p>
<p>This allows you to write the struct more than once without seeing any warnings.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_first_segment_words</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allocate_seg_callable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.copy" title="Link to this definition">¶</a></dt>
<dd><p>A method for copying this Builder</p>
<p>This is a copying operation with respect to the message’s buffer.
Changes in the new builder will not reflect in the original reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – Size of the first segment to allocate (in words ie. 8 byte increments)</p></li>
<li><p><strong>allocate_seg_callable</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.14)"><em>bytearray</em></a><em>]</em>) – A python callable object that takes the minimum number of 8-byte</p></li>
</ul>
</dd>
</dl>
<p>words to allocate (as an <cite>int</cite>) and returns a <cite>bytearray</cite>. This is used to customize the memory 
allocation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.disown">
<span class="sig-name descname"><span class="pre">disown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.disown" title="Link to this definition">¶</a></dt>
<dd><p>A method for disowning Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – The field name in the struct</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.from_dict">
<span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict</span> <span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.from_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.get_data_as_view">
<span class="sig-name descname"><span class="pre">get_data_as_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.get_data_as_view" title="Link to this definition">¶</a></dt>
<dd><p>Efficiently get a writable memoryview for a DATA field without copying.</p>
<p>This allows in-place modification of the underlying buffer:
msg.get_data_as_view(‘myField’)[0] = 0xFF</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.init">
<span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.init" title="Link to this definition">¶</a></dt>
<dd><p>Method for initializing fields that are of type union/struct/list</p>
<p>Typically, you don’t have to worry about initializing structs/unions, so this method is mainly for lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – The field name to initialize</p></li>
<li><p><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – The size of the list to initiialize. This should be None for struct/union initialization.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a> or <a class="reference internal" href="#capnp._DynamicListBuilder" title="capnp._DynamicListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicListBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if the field isn’t in this struct</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.init_resizable_list">
<span class="sig-name descname"><span class="pre">init_resizable_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.init_resizable_list" title="Link to this definition">¶</a></dt>
<dd><p>Method for initializing fields that are of type list (of structs)</p>
<p>This version of init returns a <a class="reference internal" href="#capnp._DynamicResizableListBuilder" title="capnp._DynamicResizableListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicResizableListBuilder</span></code></a> that allows
you to add members one at a time (ie. if you don’t know the size for sure).
This is only meant for lists of Cap’n Proto objects, since for primitive types
you can just define a normal python list and fill it yourself.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You need to call <a class="reference internal" href="#capnp._DynamicResizableListBuilder.finish" title="capnp._DynamicResizableListBuilder.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_DynamicResizableListBuilder.finish()</span></code></a> on the
list object before serializing the Cap’n Proto message. Failure to do
so will cause your objects not to be written out as well as leaking
orphan structs into your message.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – The field name to initialize</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicResizableListBuilder" title="capnp._DynamicResizableListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicResizableListBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if the field isn’t in this struct</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.is_root">
<span class="sig-name descname"><span class="pre">is_root</span></span><a class="headerlink" href="#capnp._DynamicStructBuilder.is_root" title="Link to this definition">¶</a></dt>
<dd><p>is_root: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#capnp._DynamicStructBuilder.schema" title="Link to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this writer</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.to_bytes">
<span class="sig-name descname"><span class="pre">to_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_bytes" title="Link to this definition">¶</a></dt>
<dd><p>Returns the struct’s containing message as a Python bytes object in the unpacked binary format.</p>
<p>This is inefficient; it makes several copies.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.14)">bytes</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this isn’t the message’s root struct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.to_bytes_packed">
<span class="sig-name descname"><span class="pre">to_bytes_packed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_bytes_packed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ordered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encode_bytes_as_base64</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.to_segments">
<span class="sig-name descname"><span class="pre">to_segments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_segments" title="Link to this definition">¶</a></dt>
<dd><p>Returns the struct’s containing message as a Python list of Python bytes objects.</p>
<p>This avoids making copies.</p>
<p>NB: This is not currently supported on PyPy.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.total_size">
<span class="sig-name descname"><span class="pre">total_size</span></span><a class="headerlink" href="#capnp._DynamicStructBuilder.total_size" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.which">
<span class="sig-name descname"><span class="pre">which</span></span><a class="headerlink" href="#capnp._DynamicStructBuilder.which" title="Link to this definition">¶</a></dt>
<dd><p>Returns the enum corresponding to the union in this struct</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicEnumField</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string/enum corresponding to what field is set in the union</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this struct doesn’t contain a union</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.write" title="Link to this definition">¶</a></dt>
<dd><p>Writes the struct’s containing message to the given file object in unpacked binary format.</p>
<p>This is a shortcut for calling capnp._write_message_to_fd().  This can only be called on the
message’s root struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<a class="reference internal" href="#capnp.KjException.file" title="capnp.KjException.file"><em>file</em></a>) – A file or socket object (or anything with a fileno() method), open for write.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>void</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this isn’t the message’s root struct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.write_async">
<span class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">write_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_AsyncIoStream</span> <span class="pre">stream</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.write_async" title="Link to this definition">¶</a></dt>
<dd><p>Async version of of write().</p>
<p>This is a shortcut for calling capnp._write_message_to_fd().  This can only be called on the
message’s root struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<a class="reference internal" href="#capnp.AsyncIoStream" title="capnp.AsyncIoStream"><em>AsyncIoStream</em></a>) – The AsyncIoStream to write the message to</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>void</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this isn’t the message’s root struct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicStructBuilder.write_packed">
<span class="sig-name descname"><span class="pre">write_packed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.write_packed" title="Link to this definition">¶</a></dt>
<dd><p>Writes the struct’s containing message to the given file object in packed binary format.</p>
<p>This is a shortcut for calling capnp._write_packed_message_to_fd().  This can only be called on
the message’s root struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<a class="reference internal" href="#capnp.KjException.file" title="capnp.KjException.file"><em>file</em></a>) – A file or socket object (or anything with a fileno() method), open for write.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>void</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this isn’t the message’s root struct.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._MallocMessageBuilder">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_MallocMessageBuilder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder" title="Link to this definition">¶</a></dt>
<dd><p>The main class for building Cap’n Proto messages</p>
<p>You will use this class to handle arena allocation of the Cap’n Proto
messages. You also use this object when you’re done assigning to Cap’n
Proto objects, and wish to serialize them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">_MallocMessageBuilder</span><span class="p">()</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">init_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alice&#39;</span>
<span class="o">...</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">_write_message_to_fd</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="capnp._MallocMessageBuilder.get_root">
<span class="sig-name descname"><span class="pre">get_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.get_root" title="Link to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing. You probably
want to use init_root instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">init_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An object where you will set all the members</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._MallocMessageBuilder.get_root_as_any">
<span class="sig-name descname"><span class="pre">get_root_as_any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.get_root_as_any" title="Link to this definition">¶</a></dt>
<dd><p>A method for getting a Cap’n Proto AnyPointer, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicObjectBuilder</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An AnyPointer that you can set fields in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._MallocMessageBuilder.get_segments_for_output">
<span class="sig-name descname"><span class="pre">get_segments_for_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.get_segments_for_output" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._MallocMessageBuilder.init_root">
<span class="sig-name descname"><span class="pre">init_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.init_root" title="Link to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs</p>
<p>You will need to pass in a schema to specify which struct to
instantiate. Schemas are available in a loaded Cap’n Proto module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">init_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An object where you will set all the members</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._MallocMessageBuilder.new_orphan">
<span class="sig-name descname"><span class="pre">new_orphan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.new_orphan" title="Link to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing.
Orphans are useful for dynamically allocating objects for an unknown sized list, ie:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">_MallocMessageBuilder</span><span class="p">()</span>
<span class="n">alice</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">new_orphan</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An orphan representing a <a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._MallocMessageBuilder.set_root">
<span class="sig-name descname"><span class="pre">set_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.set_root" title="Link to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs by copying from an existing struct</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a>) – A Cap’n Proto struct value to copy</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="id1">
<h3>RPC<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="capnp._CapabilityClient">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_CapabilityClient</span></span><a class="headerlink" href="#capnp._CapabilityClient" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp._CapabilityClient.cast_as">
<span class="sig-name descname"><span class="pre">cast_as</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._CapabilityClient.cast_as" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="capnp._DynamicCapabilityClient">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicCapabilityClient</span></span><a class="headerlink" href="#capnp._DynamicCapabilityClient" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicCapabilityClient.cast_as">
<span class="sig-name descname"><span class="pre">cast_as</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicCapabilityClient.cast_as" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="capnp._DynamicCapabilityClient.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#capnp._DynamicCapabilityClient.schema" title="Link to this definition">¶</a></dt>
<dd><p>A property that returns the _InterfaceSchema object matching this client</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicCapabilityClient.upcast">
<span class="sig-name descname"><span class="pre">upcast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicCapabilityClient.upcast" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="id2">
<h3>Miscellaneous<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="capnp._DynamicOrphan">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">capnp.</span></span><span class="sig-name descname"><span class="pre">_DynamicOrphan</span></span><a class="headerlink" href="#capnp._DynamicOrphan" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="capnp._DynamicOrphan.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicOrphan.get" title="Link to this definition">¶</a></dt>
<dd><p>Returns a python object corresponding to the DynamicValue owned by this orphan</p>
<p>Use this DynamicValue to set fields inside the orphan</p>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rpc">RPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#capnp.lib.capnp._RemotePromise"><code class="docutils literal notranslate"><span class="pre">_RemotePromise</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#communication">Communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#capability">Capability</a></li>
<li class="toctree-l4"><a class="reference internal" href="#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous">Miscellaneous</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#capnp.KjException"><code class="docutils literal notranslate"><span class="pre">KjException</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp.SchemaParser"><code class="docutils literal notranslate"><span class="pre">SchemaParser</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp.SchemaLoader"><code class="docutils literal notranslate"><span class="pre">SchemaLoader</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#capnp.add_import_hook"><code class="docutils literal notranslate"><span class="pre">add_import_hook()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#capnp.remove_import_hook"><code class="docutils literal notranslate"><span class="pre">remove_import_hook()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#capnp.cleanup_global_schema_parser"><code class="docutils literal notranslate"><span class="pre">cleanup_global_schema_parser()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#capnp.kj_loop"><code class="docutils literal notranslate"><span class="pre">kj_loop()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#capnp.run"><code class="docutils literal notranslate"><span class="pre">run()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#capnp.load"><code class="docutils literal notranslate"><span class="pre">load()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#internal-classes">Internal Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modules">Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#capnp._InterfaceModule"><code class="docutils literal notranslate"><span class="pre">_InterfaceModule</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._StructModule"><code class="docutils literal notranslate"><span class="pre">_StructModule</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#readers">Readers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#capnp._DynamicListReader"><code class="docutils literal notranslate"><span class="pre">_DynamicListReader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._DynamicStructReader"><code class="docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._PackedFdMessageReader"><code class="docutils literal notranslate"><span class="pre">_PackedFdMessageReader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._StreamFdMessageReader"><code class="docutils literal notranslate"><span class="pre">_StreamFdMessageReader</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#builders">Builders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#capnp._DynamicResizableListBuilder"><code class="docutils literal notranslate"><span class="pre">_DynamicResizableListBuilder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._DynamicListBuilder"><code class="docutils literal notranslate"><span class="pre">_DynamicListBuilder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._DynamicStructBuilder"><code class="docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._MallocMessageBuilder"><code class="docutils literal notranslate"><span class="pre">_MallocMessageBuilder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id1">RPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#capnp._CapabilityClient"><code class="docutils literal notranslate"><span class="pre">_CapabilityClient</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#capnp._DynamicCapabilityClient"><code class="docutils literal notranslate"><span class="pre">_DynamicCapabilityClient</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Miscellaneous</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#capnp._DynamicOrphan"><code class="docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="quickstart.html"
                          title="previous chapter">Quickstart</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/capnp.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quickstart"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">capnp 2.2.2 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API Reference</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2013-2019 (Jason Paryani), 2019-2020 (Jacob Alexander).
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    </div>
  </body>
</html>